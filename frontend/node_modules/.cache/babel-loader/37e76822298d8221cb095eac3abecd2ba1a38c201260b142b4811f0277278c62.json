{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ptg40\\\\Pictures\\\\Lenovo\\\\mern-movie-app\\\\frontend\\\\src\\\\pages\\\\SearchPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport API from '../api/api';\nimport { Box, TextField, Button, Grid, Typography, CircularProgress, Autocomplete } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport MovieCard from '../components/MovieCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchPage() {\n  _s();\n  const [q, setQ] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [suggestions, setSuggestions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [searched, setSearched] = useState(false);\n  const navigate = useNavigate();\n\n  // ðŸ”Ž Button search\n  async function handleSearch(e) {\n    e.preventDefault();\n    if (!q.trim()) return;\n    try {\n      setLoading(true);\n      setError('');\n      setSearched(true);\n      const res = await API.get('/movies/search', {\n        params: {\n          q\n        }\n      });\n      const payload = res.data;\n      const resultArray = Array.isArray(payload) ? payload : Array.isArray(payload.movies) ? payload.movies : [];\n      setMovies(resultArray);\n    } catch (err) {\n      console.error('Search error:', err);\n      setError('Failed to search movies');\n      setMovies([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // ðŸ’¡ Suggestions while typing\n  async function handleSuggestion(_, value) {\n    setQ(value);\n    if (!value || value.length < 2) {\n      setSuggestions([]);\n      return;\n    }\n    try {\n      const res = await API.get('/movies/search', {\n        params: {\n          q: value\n        }\n      });\n      const payload = res.data;\n      const arr = Array.isArray(payload) ? payload : Array.isArray(payload.movies) ? payload.movies : [];\n      setSuggestions(arr);\n    } catch {\n      setSuggestions([]);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      fontWeight: 600,\n      mb: 2,\n      children: \"Search Movies\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      onSubmit: handleSearch,\n      sx: {\n        display: 'flex',\n        flexDirection: {\n          xs: 'column',\n          sm: 'row'\n        },\n        gap: 1,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Autocomplete, {\n        freeSolo: true,\n        options: suggestions,\n        getOptionLabel: option => option.title || '',\n        onInputChange: handleSuggestion,\n        onChange: (_, value) => {\n          if (value !== null && value !== void 0 && value._id) {\n            navigate(`/movie/${value._id}`);\n          }\n        },\n        noOptionsText: \"No suggestions\",\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          ...params,\n          label: \"Search by title or description\",\n          size: \"small\",\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        disabled: loading,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        mt: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n      color: \"error\",\n      align: \"center\",\n      sx: {\n        mt: 3\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this), !loading && searched && movies.length === 0 && /*#__PURE__*/_jsxDEV(Typography, {\n      align: \"center\",\n      sx: {\n        mt: 4\n      },\n      children: \"No movies found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: movies.map(movie => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 3,\n        children: /*#__PURE__*/_jsxDEV(MovieCard, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)\n      }, movie._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchPage, \"YJkd2zikR7y7uT1zUwpWz19TU10=\", false, function () {\n  return [useNavigate];\n});\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","API","Box","TextField","Button","Grid","Typography","CircularProgress","Autocomplete","useNavigate","MovieCard","jsxDEV","_jsxDEV","SearchPage","_s","q","setQ","movies","setMovies","suggestions","setSuggestions","loading","setLoading","error","setError","searched","setSearched","navigate","handleSearch","e","preventDefault","trim","res","get","params","payload","data","resultArray","Array","isArray","err","console","handleSuggestion","_","value","length","arr","children","variant","fontWeight","mb","fileName","_jsxFileName","lineNumber","columnNumber","component","onSubmit","sx","display","flexDirection","xs","sm","gap","freeSolo","options","getOptionLabel","option","title","onInputChange","onChange","_id","noOptionsText","renderInput","label","size","fullWidth","type","disabled","justifyContent","mt","color","align","container","spacing","map","movie","item","md","lg","_c","$RefreshReg$"],"sources":["C:/Users/ptg40/Pictures/Lenovo/mern-movie-app/frontend/src/pages/SearchPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport API from '../api/api';\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  CircularProgress,\r\n  Autocomplete\r\n} from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MovieCard from '../components/MovieCard';\r\n\r\nexport default function SearchPage() {\r\n  const [q, setQ] = useState('');\r\n  const [movies, setMovies] = useState([]);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [searched, setSearched] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // ðŸ”Ž Button search\r\n  async function handleSearch(e) {\r\n    e.preventDefault();\r\n    if (!q.trim()) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      setSearched(true);\r\n\r\n      const res = await API.get('/movies/search', { params: { q } });\r\n\r\n      const payload = res.data;\r\n      const resultArray = Array.isArray(payload)\r\n        ? payload\r\n        : Array.isArray(payload.movies)\r\n          ? payload.movies\r\n          : [];\r\n\r\n      setMovies(resultArray);\r\n    } catch (err) {\r\n      console.error('Search error:', err);\r\n      setError('Failed to search movies');\r\n      setMovies([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // ðŸ’¡ Suggestions while typing\r\n  async function handleSuggestion(_, value) {\r\n    setQ(value);\r\n\r\n    if (!value || value.length < 2) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await API.get('/movies/search', { params: { q: value } });\r\n      const payload = res.data;\r\n      const arr = Array.isArray(payload)\r\n        ? payload\r\n        : Array.isArray(payload.movies)\r\n          ? payload.movies\r\n          : [];\r\n      setSuggestions(arr);\r\n    } catch {\r\n      setSuggestions([]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h5\" fontWeight={600} mb={2}>\r\n        Search Movies\r\n      </Typography>\r\n\r\n      {/* Search with suggestions */}\r\n      <Box\r\n        component=\"form\"\r\n        onSubmit={handleSearch}\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: { xs: 'column', sm: 'row' },\r\n          gap: 1,\r\n          mb: 3\r\n        }}\r\n      >\r\n        <Autocomplete\r\n          freeSolo\r\n          options={suggestions}\r\n          getOptionLabel={(option) => option.title || ''}\r\n          onInputChange={handleSuggestion}\r\n          onChange={(_, value) => {\r\n            if (value?._id) {\r\n              navigate(`/movie/${value._id}`);\r\n            }\r\n          }}\r\n          noOptionsText=\"No suggestions\"\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              label=\"Search by title or description\"\r\n              size=\"small\"\r\n              fullWidth\r\n            />\r\n          )}\r\n        />\r\n\r\n        <Button type=\"submit\" variant=\"contained\" disabled={loading}>\r\n          Search\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Loading */}\r\n      {loading && (\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n          <CircularProgress />\r\n        </Box>\r\n      )}\r\n\r\n      {/* Error */}\r\n      {error && (\r\n        <Typography color=\"error\" align=\"center\" sx={{ mt: 3 }}>\r\n          {error}\r\n        </Typography>\r\n      )}\r\n\r\n      {/* No results (ONLY after search click) */}\r\n      {!loading && searched && movies.length === 0 && (\r\n        <Typography align=\"center\" sx={{ mt: 4 }}>\r\n          No movies found.\r\n        </Typography>\r\n      )}\r\n\r\n      {/* Results */}\r\n      <Grid container spacing={2}>\r\n        {movies.map((movie) => (\r\n          <Grid item key={movie._id} xs={12} sm={6} md={4} lg={3}>\r\n            <MovieCard movie={movie} />\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}